{% extends "large_container.html" %}

{% load widget_tweaks %}

{% block title %}
Edit Info
{% endblock %}

{% block inner_content %}

<div class="row">
  <ul class="nav nav-tabs nav-justified">
    <li role="presentation" class="active"><a>Profile</a></li>
    <li role="presentation"><a href="{% url 'edit_edu' mcuser.norm_name %}">Education</a></li>
    <li role="presentation"><a href="{% url 'edit_exp' mcuser.norm_name %}">Experience</a></li>
    <li role="presentation"><a href="{% url 'edit_abroad' mcuser.norm_name %}">Study Abroad</a></li>
  </ul>
  <br>
  <div id="messageContainer">
    {% if messages %}
      {% for message in messages %}
        <div {% if message.tags %} class="alert alert-{{ message.tags }}"{% endif %} role="alert">{{ message|capfirst }}</div>
      {% endfor %}
    {% endif %}
  </div>
  {% if form.errors %}
    There were errors!
      {% for field in form %}
        {% for error in field.errors %}
          <p> {{ error }} {{ field.label_tag }} </p>
        {% endfor %}
      {% endfor %}
  {% endif %}
  <form enctype="multipart/form-data" method="post" action="{% url 'edit_info' mcuser.norm_name %}" class="form-horizontal" id="formInfo">
  {% csrf_token %}
    {% for hidden in form.hidden_fields %}
      {{ hidden }}
      {{ hidden.errors }}
    {% endfor %}

    <!-- Manual HTML for McUser form -->
    <div class="col-md-6">
      <div class="form-group margin-sm">
        <label for="id_{{ form.first_name.name }}" class="form-label">
          First name
        </label>
        {{ form.first_name|add_class:"form-control" }}
        <span class="error">{{ form.first_name.errors }}</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group margin-sm">
        <label for="id_{{ form.last_name.name }}" class="form-label">
          Last name
        </label>
        {{ form.last_name|add_class:"form-control" }}
        <span class="error">{{ form.last_name.errors }}</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group margin-sm">
        <label for="id_{{ form.birthday.name }}" class="form-label">
          Birthday
        </label>
        {{ form.birthday|add_class:"form-control" }}
        <span class="error">{{ form.birthday.errors }}</span>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group margin-sm">
        <label for="id_{{ form.class_year.name }}" class="form-label">
          Class year
        </label>
        {{ form.class_year|add_class:"form-control" }}
        <span class="error">{{ form.class_year.errors }}</span>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group margin-sm">
        <label for="id_{{ form.gender.name }}" class="form-label">
          Gender
        </label>
        {{ form.gender|add_class:"form-control" }}
        <span class="error">{{ form.gender.errors }}</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group margin-sm">
        <label for="id_{{ form.utd_id.name }}" class="form-label staff-only">
          UTD ID
        </label>
        {{ form.utd_id|add_class:"form-control" }}
        <span class="error">{{ form.utd_id.errors }}</span>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group margin-sm">
        <label for="id_{{ form.hometown.name }}" class="form-label">
          Hometown City
        </label>
        {{ form.hometown|add_class:"form-control" }}
        <span class="error">{{ form.hometown.errors }}</span>
      </div>
    </div>
    <div class="col-md-3">
      <div class="form-group margin-sm">
        <label for="id_{{ form.hometown_state.name }}" class="form-label">
          Hometown State
        </label>
        {{ form.hometown_state|add_class:"form-control" }}
        <span class="error">{{ form.hometown_state.errors }}</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group margin-sm">
        <label for="id_{{ form.high_school.name }}" class="form-label">
          High School
        </label>
        {{ form.high_school|add_class:"form-control" }}
        <span class="error">{{ form.high_school.errors }}</span>
      </div>
    </div>
    <div class="col-md-6">
      <div class="form-group margin-sm">
        <label for="id_{{ form.phone_number.name }}" class="form-label">
          Phone Number
        </label>
        {{ form.phone_number|add_class:"form-control" }}
        <span class="error">{{ form.phone_number.errors }}</span>
      </div>
    </div>
    <!--TODO: Replace this with something else later -->
    <div class="col-md-4 col-md-offset-4 text-center margin-height-md">
      {{ form.pic }}
      <span class="error">{{ form.pic.errors }}</span>
    </div>
    <div class="col-md-12 text-center">
      <span class="staff-only">Orange fields</span> are viewable by staff only.
      <br>
      <br>
      <input class="btn btn-default" type="submit" value="SAVE" />
    </div>
  </form>
</div>


<script>
  var inputChanged = false;
  $(document).ready(function() {
    $('input').change(function() {
      if(!inputChanged) {
        $('#messageContainer').empty();
        $('#messageContainer').append('<div class="alert alert-info" role="alert">Don\'t forget to save your changes!</div>');
        inputChanged = true;
      }
    });
    $('.datepicker').datepicker();
  });
</script>
{% endblock %}
